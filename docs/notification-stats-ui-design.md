# 通知機能・統計機能 UI設計書

## 🔔 通知機能 UI設計

### 1. 通知設定画面

#### 設定画面レイアウト
```
┌──────────────────────────────────────────────┐
│  ⚙️ 通知設定                                  │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 🔔 ブラウザ通知                         │ │
│  │                                        │ │
│  │ デスクトップ通知を有効にする            │ │
│  │ [━━━━━━━━━━●] ON                     │ │
│  │                                        │ │
│  │ ⚠️ ブラウザの通知許可が必要です          │ │
│  │ [通知を許可する]                       │ │
│  └────────────────────────────────────────┘ │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ ⏰ リマインダー設定                     │ │
│  │                                        │ │
│  │ タスク期限前の通知                      │ │
│  │ ├─ 1時間前    [━━━━━━━━━━●] ON      │ │
│  │ ├─ 3時間前    [●━━━━━━━━━━] OFF     │ │
│  │ └─ 1日前      [━━━━━━━━━━●] ON      │ │
│  │                                        │ │
│  │ デイリータスクの通知時刻                │ │
│  │ [09:00 ▼]                            │ │
│  └────────────────────────────────────────┘ │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 📱 通知する内容                         │ │
│  │                                        │ │
│  │ ☑ アニメ放送開始                       │ │
│  │ ☑ ゲームデイリーリセット               │ │
│  │ ☑ 新刊発売日                          │ │
│  │ ☑ タスク完了リマインダー               │ │
│  └────────────────────────────────────────┘ │
│                                              │
│  [変更を保存]                                │
└──────────────────────────────────────────────┘
```

#### 通知許可フロー
```
┌─────────────────────────────────────┐
│  通知を有効にする                    │
│                                     │
│      🔔                             │
│                                     │
│  オタク秘書からの通知を             │
│  受け取りますか？                   │
│                                     │
│  重要なタスクのリマインダーや       │
│  期限のお知らせを通知します         │
│                                     │
│  [後で]     [通知を許可]            │
└─────────────────────────────────────┘
```

### 2. 通知デザイン

#### ブラウザ通知フォーマット
```
┌─────────────────────────────────────┐
│ 🎯 オタク秘書                       │
├─────────────────────────────────────┤
│ アニメ「SPY×FAMILY」                │
│ まもなく放送開始（23:00）           │
│                                     │
│ [見る] [10分後に再通知] [無視]      │
└─────────────────────────────────────┘
```

#### アプリ内通知トースト
```
┌─────────────────────────────────────────┐
│ ✅ タスクを完了しました！                │
│ 今日の完了率: 60% → 70%                 │
└─────────────────────────────────────────┘

┌─────────────────────────────────────────┐
│ ⏰ リマインダー                         │
│ 「原神 - 樹脂消化」の期限が近づいています │
│ あと30分                                │
└─────────────────────────────────────────┘
```

### 3. 通知センター

```
┌──────────────────────────────────────────────┐
│  🔔 通知センター                    [既読]   │
├──────────────────────────────────────────────┤
│  今日 ─────────────────────────────────      │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 14:30  ⏰ デイリータスクリマインダー     │ │
│  │        FGOのログインボーナスを          │ │
│  │        忘れずに受け取りましょう         │ │
│  └────────────────────────────────────────┘ │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 09:00  📺 新着アニメ                   │ │
│  │        今日放送予定: 3作品              │ │
│  └────────────────────────────────────────┘ │
│                                              │
│  昨日 ─────────────────────────────────      │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 22:00  ✅ デイリー達成                 │ │
│  │        すべてのタスクを完了しました！    │ │
│  └────────────────────────────────────────┘ │
└──────────────────────────────────────────────┘
```

---

## 📊 統計機能拡張 UI設計

### 1. 統計ダッシュボード

#### メインビュー
```
┌──────────────────────────────────────────────┐
│  📊 統計・分析                               │
│                                              │
│  期間: [今週 ▼] [カスタム期間]               │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 完了率推移                             │ │
│  │                                        │ │
│  │ 100% ┤                                 │ │
│  │  80% ┤     ╱╲    ╱╲                  │ │
│  │  60% ┤  ╱╲╱  ╲╱╲╱  ╲                │ │
│  │  40% ┤╱╲        ╲                    │ │
│  │  20% ┤                                │ │
│  │   0% └────┴────┴────┴────┴────┴────┴  │ │
│  │      月  火  水  木  金  土  日        │ │
│  │                                        │ │
│  │ 平均完了率: 68%  最高: 85% (木)        │ │
│  └────────────────────────────────────────┘ │
│                                              │
│  ┌──────────────┐  ┌──────────────────┐    │
│  │ カテゴリ別   │  │ 優先度別完了率   │    │
│  │              │  │                  │    │
│  │ アニメ  85%  │  │ 高: 95%         │    │
│  │ ゲーム  72%  │  │ 中: 70%         │    │
│  │ 新刊    45%  │  │ 低: 40%         │    │
│  └──────────────┘  └──────────────────┘    │
└──────────────────────────────────────────────┘
```

### 2. 詳細分析画面

#### 週間レポート
```
┌──────────────────────────────────────────────┐
│  📅 週間レポート (1/8 - 1/14)                │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 📈 パフォーマンスサマリー               │ │
│  │                                        │ │
│  │ 総タスク数:        70                  │ │
│  │ 完了タスク:        48                  │ │
│  │ 完了率:           68.6%                │ │
│  │ 前週比:           +5.2%                │ │
│  └────────────────────────────────────────┘ │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 🏆 ベストデー                          │ │
│  │                                        │ │
│  │ 木曜日 - 完了率 85%                    │ │
│  │ • すべてのアニメを視聴                 │ │
│  │ • ゲームデイリー 100%完了              │ │
│  └────────────────────────────────────────┘ │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 💡 改善ポイント                        │ │
│  │                                        │ │
│  │ • 新刊タスクの完了率が低い (45%)       │ │
│  │ • 土日の完了率が平日より20%低い        │ │
│  │ • 低優先度タスクが溜まりがち           │ │
│  └────────────────────────────────────────┘ │
└──────────────────────────────────────────────┘
```

#### カテゴリー別詳細
```
┌──────────────────────────────────────────────┐
│  🎮 ゲームタスク分析                         │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ ゲーム別完了率                         │ │
│  │                                        │ │
│  │ FGO          ████████████████  95%    │ │
│  │ 原神         ██████████████    85%    │ │
│  │ ウマ娘       ████████          60%    │ │
│  │ スターレイル  ██████            45%    │ │
│  └────────────────────────────────────────┘ │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 時間帯別アクティビティ                 │ │
│  │                                        │ │
│  │   6時 ██                               │ │
│  │   9時 ████████                         │ │
│  │  12時 ██████                           │ │
│  │  18時 ████                             │ │
│  │  21時 ████████████                     │ │
│  │  24時 ██                               │ │
│  │                                        │ │
│  │ 最も活発な時間: 21:00-22:00            │ │
│  └────────────────────────────────────────┘ │
└──────────────────────────────────────────────┘
```

### 3. 月間トレンド

```
┌──────────────────────────────────────────────┐
│  📊 月間トレンド                             │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ タスク数と完了率の推移                 │ │
│  │                                        │ │
│  │ タスク数          完了率               │ │
│  │ 100┤              100%┤               │ │
│  │  80┤ ▬▬▬▬▬▬▬       80%┤     ••••      │ │
│  │  60┤              60%┤  •••    •••   │ │
│  │  40┤              40%┤••           •• │ │
│  │  20┤              20%┤               │ │
│  │   0└───────────     0%└───────────    │ │
│  │    第1週 第2週 第3週 第4週             │ │
│  └────────────────────────────────────────┘ │
│                                              │
│  ┌────────────────────────────────────────┐ │
│  │ 📈 成長指標                            │ │
│  │                                        │ │
│  │ • 連続達成日数: 5日 🔥                 │ │
│  │ • 最長連続記録: 12日                   │ │
│  │ • 今月の達成バッジ: 3個                │ │
│  └────────────────────────────────────────┘ │
└──────────────────────────────────────────────┘
```

### 4. エクスポート機能

```
┌──────────────────────────────────────────────┐
│  📥 レポートをエクスポート                    │
│                                              │
│  期間を選択:                                 │
│  [2024年1月 ▼]                             │
│                                              │
│  フォーマット:                               │
│  ○ PDF形式                                  │
│  ○ CSV形式                                  │
│  ● 画像形式 (PNG)                           │
│                                              │
│  含める内容:                                 │
│  ☑ 完了率グラフ                             │
│  ☑ カテゴリー別分析                         │
│  ☑ 週間サマリー                             │
│  ☐ 詳細タスクリスト                         │
│                                              │
│  [キャンセル]  [エクスポート]                │
└──────────────────────────────────────────────┘
```

---

## 🎨 ビジュアルデザイン仕様

### カラーパレット

#### 通知機能
```css
/* 通知タイプ別カラー */
.notification-info {
  background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
}

.notification-warning {
  background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
}

.notification-success {
  background: linear-gradient(135deg, #10B981 0%, #059669 100%);
}

.notification-urgent {
  background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%);
}
```

#### 統計グラフ
```css
/* グラフカラー */
:root {
  --chart-primary: #8B5CF6;    /* メイン紫 */
  --chart-secondary: #EC4899;  /* ピンク */
  --chart-tertiary: #3B82F6;   /* ブルー */
  --chart-success: #10B981;    /* グリーン */
  --chart-warning: #F59E0B;    /* オレンジ */
}
```

### アニメーション

#### 通知表示
```css
@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.notification-toast {
  animation: slideIn 0.3s ease-out;
}
```

#### グラフ描画
```css
@keyframes drawLine {
  to {
    stroke-dashoffset: 0;
  }
}

.chart-line {
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: drawLine 1.5s ease-out forwards;
}
```

### レスポンシブ対応

#### モバイル（< 640px）
- 統計グラフは縦積み表示
- 通知は画面下部から表示
- スワイプで通知を消去

#### タブレット（640px - 1024px）
- 2カラムレイアウト
- グラフは横並び可能

#### デスクトップ（> 1024px）
- フル機能表示
- サイドバーに通知センター

---

## 🔧 実装における技術的考慮事項

### 通知機能
1. **Service Worker** の実装（オフライン時も通知可能）
2. **通知スケジューラー** の実装
3. **通知履歴** のIndexedDB保存

### 統計機能
1. **グラフライブラリ**: Recharts または Chart.js
2. **データ集計**: 日次バッチでの事前計算
3. **パフォーマンス**: 大量データ時の仮想スクロール

### アクセシビリティ
1. **通知の読み上げ**: スクリーンリーダー対応
2. **グラフの代替テキスト**: 数値データの表形式表示
3. **キーボード操作**: すべての機能にキーボードでアクセス可